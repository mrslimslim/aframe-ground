<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="/lib/three.js"></script>
    <script src="/lib/aframe.js"></script>
    <script src="/lib/cga.js"></script>
    <script>
      AFRAME.registerGeometry("cgaExtrude", {
        schema: {
          thickness: {
            default: 2,
          },
          arg_path: {
            default: [new THREE.Vector3(2, 0, 0), new THREE.Vector3(-2, 0, 0)],
          },
        },
        init: function (data) {
          // this.geometry = cga.extrudeToGeometryBuffer(
          //   [
          //     cga.v3(-data.thickness / 2, 0, 0),
          //     cga.v3(data.thickness / 2, 0, 0),
          //   ],
          //   [new THREE.Vector3(-10, 0.5, 0), new THREE.Vector3(10, 0.5, 0)],
          //   {
          //     normal: cga.v3(0, 0, 1),
          //     isClosed: true,
          //     sealStart: false,
          //     sealEnd: false,
          //     textureScale: new cga.Vector2(1 / 3, 1 / 2000),
          //   }
          // );
          this.geometry = new THREE.BoxGeometry(10,10,10)
        },
      });
      
      AFRAME.registerComponent('road-material', {
        schema: {
          src: {
            default: ''
          }
        },
        init: function (data) {
          console.log(data);
          const textureLoader = new THREE.TextureLoader();
          const roadMap = textureLoader.load(data.src);
          roadMap.wrapS = THREE.RepeatWrapping;
          roadMap.wrapT = THREE.RepeatWrapping;
          roadMap.rotation = Math.PI / 2;
          roadMap.offset.set(0.5, 0.5);
          this.material = new THREE.MeshBasicMaterial({
            map: roadMap1,
            transparent: true,
            depthWrite: false,
          })
        },
      
        update: function () {
          // Update `this.material`.
        }
      });
    </script>
  </head>
  <body>
    <!-- <script src="/lib/aframe-ar.js"></script> -->
    <!-- <script src="/lib/gesture-detector.js"></script> -->
    <!-- <script src="/lib/gesture-handler.js"></script> -->
    
    <a-scene>
      <a-entity
        geometry="primitive: plane;width:60;height:36;"
        rotation="90 0 0"
        material="color: pink;side:double;"
      ></a-entity>
      <a-entity
        gltf-model="/server_racking_system/scene.gltf"
        scale="0.004, 0.004, 0.004"
        position="-24 -0.5 -12"
        rotation="0 90 0"
      >
      </a-entity>
      <a-entity
        gltf-model="/sketchfab_robot/scene.gltf"
        scale="3 3 3"
        position="0 2.5 -12"
        rotation="0 90 0"
      >
      </a-entity>
      <a-entity
        gltf-model="/personal_computer/scene.gltf"
        scale="5 5 5"
        position="24 0 -12"
      >
      </a-entity>
      <a-entity
        gltf-model="/basic_head_structure/scene.gltf"
        scale="3 3 3"
        position="0 2 12"
        rotation="0 180 0"
      >
      </a-entity>
      <a-entity geometry="primitive: cgaExtrude;thickness: 2;" road-material="src:url(/lib/img/traffic_01.png);"></a-entity>
      <a-camera position="15 15 35" ></a-camera>
    </a-scene>
  </body>
</html>
